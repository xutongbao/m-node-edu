{"version":3,"sources":["components/light/Icon.js","utils/tools.js","api/urls.js","api/lightUrls.js","utils/config.js","api/common.js","api/index.js","api/lightApi.js","views/light/login/Login.js"],"names":["Icon","props","name","className","onClick","timer","showLoading","delay","setTimeout","store","dispatch","type","key","value","hideLoading","clearTimeout","getRouterSearchObj","url","params","arr","split","length","i","l","a","parseQueryString","location","search","getHost","result","exec","deepClone","obj","fromJS","toJS","imgUrlFormat","tempUrl","splice","join","urls","light","login","logout","getUserInfo","nodeBaseURL","uploadLogo","shopSearch","shopAdd","shopDelete","shopEdit","category","templateSearch","templateAdd","templateDelete","templateEdit","easyTemplateSearch","easyTemplateAdd","easyTemplateDelete","easyTemplateEdit","categorySearch","categoryAdd","categoryDelete","categoryEdit","testCompanySearch","testCompanyAdd","testCompanyDelete","testCompanyEdit","testCompanyFastAdd","testRelatedBrand","companySearch","companyAdd","companyDelete","companyEdit","companyQuickAdd","companySetOperate","relatedBrand","companyBaiduCheck","companyBaiduView","companyBaiduResetCheck","companyBaiduPhone","baseURL","axios","defaults","interceptors","request","use","config","headers","token","localStorage","getItem","method","data","err","Promise","reject","response","res","code","state","msg","message","error_msg","error_code","warning","common","contentType","qs","stringify","Api","categroySearch","categroyAdd","categroyDelete","categroyEdit","companyFastAdd","id","Login","useState","username","setUsername","password","setPassword","handleLogin","trim","userName","passWord","then","history","push","setItem","info","onChange","e","target","placeholder","autoFocus","onKeyUp","keyCode","handleEnter"],"mappings":"6FAAA,kDAEe,SAASA,EAAKC,GAC3B,IAAMC,EAAoBD,EAApBC,KAAMC,EAAcF,EAAdE,UACZ,OACE,sBACEA,UAAS,6BAAwBD,EAAxB,YAAgCC,GAAwB,IACjEC,QAASH,EAAMG,Y,iPCJjBC,E,yBAGEC,EAAc,WAAgB,IAAfC,EAAc,uDAAN,EAC3BF,EAAQG,YAAW,WACjBC,IAAMC,SAAS,CACbC,KAAM,kBACNC,IAAK,CAAC,aACNC,OAAO,MAERN,IAICO,EAAc,WAClBC,aAAaV,GACbI,IAAMC,SAAS,CACbC,KAAM,kBACNC,IAAK,CAAC,aACNC,OAAO,KAoBLG,EAAqB,SAACf,GAK1B,OApBuB,SAACgB,GACxB,IAAIC,EAAS,GACTC,EAAMF,EAAIG,MAAM,KACpB,GAAID,EAAIE,QAAU,EAChB,OAAOH,EAGT,IAAK,IAAII,EAAI,EAAGC,GADhBJ,EAAMA,EAAI,GAAGC,MAAM,MACKC,OAAQC,EAAIC,EAAGD,IAAK,CAC1C,IAAIE,EAAIL,EAAIG,GAAGF,MAAM,KACrBF,EAAOM,EAAE,IAAMA,EAAE,GAEnB,OAAON,EAQiBO,CADpBxB,EADFyB,SAAYC,SAOVC,EAAU,SAACX,GACf,IACIY,EADM,4CACOC,KAAKb,GACtB,GAAIY,EACF,MAAO,UAAYA,EAAO,IAIxBE,EAAY,SAACC,GACjB,OAAOC,iBAAOD,GAAKE,QAGfC,EAAe,SAAClB,GAElB,IAAImB,EAAO,YAAOnB,GAGlB,OAFAmB,EAAQC,OAAO,EAAG,EAAG,SACrBD,EAAUA,EAAQE,KAAK,M,8CCjErBC,EAAO,CACXC,MCCW,CACXC,MAAO,kBACPC,OAAQ,mBACRC,YAAaC,IAAc,mBAC3BC,WAAYD,IAAc,cAC1BE,WAAYF,IAAe,mBAC3BG,QAASH,IAAe,gBACxBI,WAAYJ,IAAe,mBAC3BK,SAAUL,IAAe,iBACzBM,SAAUN,IAAe,gBACzBO,eAAgBP,IAAe,uBAC/BQ,YAAaR,IAAe,oBAC5BS,eAAgBT,IAAe,uBAC/BU,aAAcV,IAAe,qBAC7BW,mBAAoBX,IAAe,2BACnCY,gBAAiBZ,IAAe,wBAChCa,mBAAoBb,IAAe,2BACnCc,iBAAkBd,IAAe,yBACjCe,eAAgBf,IAAe,uBAC/BgB,YAAahB,IAAe,oBAC5BiB,eAAgBjB,IAAe,uBAC/BkB,aAAclB,IAAe,qBAC7BmB,kBAAmBnB,IAAe,sBAClCoB,eAAgBpB,IAAe,mBAC/BqB,kBAAmBrB,IAAe,sBAClCsB,gBAAiBtB,IAAe,oBAChCuB,mBAAoBvB,IAAe,uBACnCwB,iBAAkBxB,IAAe,oBAIjCyB,cAAe,2BACfC,WAAY,iCACZC,cAAe,0BACfC,YAAa,2BACbC,gBAAiB,+BACjBC,kBAAmB,iCAEnBC,aAAc,gCACdC,kBAAmB,uCACnBC,iBAAkB,qCAClBC,uBAAwB,6CACxBC,kBAAmB,+CDxCNxC,O,iCELf,wEAAMyC,EAEE,uCAIFpC,EAEE,+C,wICJRqC,IAAMC,SAASF,QAAUA,IAEzBC,IAAME,aAAaC,QAAQC,KACzB,SAACC,GAcC,OAbAA,EAAOC,QAAQC,MAAQC,aAAaC,QAAQ,UAAY,GAUlC,QAAlBJ,EAAOK,SACTL,EAAOpE,OAAP,eAAqBoE,EAAOM,OAEvBN,KAET,SAACO,GACC,OAAOC,QAAQC,OAAOF,MAI1BZ,IAAME,aAAaa,SAASX,KAAI,SAACY,GAE/B,GAAsB,MAAlBA,EAAIL,KAAKM,MAAmC,IAAnBD,EAAIL,KAAKO,MACpC,OAAOF,EAAIL,KACN,GAAsB,MAAlBK,EAAIL,KAAKM,MAAmC,IAAnBD,EAAIL,KAAKO,MAAa,CACxD,IAAIC,EAAM,GAQV,OAPAA,EAAMH,EAAIL,KAAKS,QACZJ,EAAIL,MAAQK,EAAIL,KAAKA,OACtBQ,GAAOH,EAAIL,KAAKA,KAAKU,UAAd,WAA8BL,EAAIL,KAAKA,KAAKU,UAA5C,KAA2D,GAClEF,GAAOH,EAAIL,KAAKA,KAAKW,WAAaN,EAAIL,KAAKA,KAAKW,WAAY,IAG9DF,IAAQG,QAAQJ,GACTH,EAAIL,KAEX,OAAOE,QAAQC,OAAOE,MAInB,IAAMQ,EAAM,uCAAG,WAAOnB,GAAP,eAAA9D,EAAA,4DACO,sCAAvB8D,EAAOoB,cACTpB,EAAOC,QAAU,CAAE,eAAgB,qCACnCD,EAAOM,KAAOe,IAAGC,UAAUtB,EAAOM,OAHhB,SAKJX,IAAMK,GALF,cAKhBW,EALgB,yBAMbA,GANa,2CAAH,sDC9CbY,EAAM,CACVrE,MCCU,CACVC,MAAO,SAACmD,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMC,MAAOmD,OAAMD,OAAQ,UAC/DjD,OAAQ,SAACkD,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAME,OAAQkD,OAAMD,OAAQ,UACjEhD,YAAa,kBAAM8D,EAAO,CAAExF,IAAKsB,IAAKC,MAAMG,eAC5CG,WAAY,SAAC8C,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMM,WAAY8C,OAAMD,OAAQ,UACzE5C,QAAS,SAAC6C,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMO,QAAS6C,OAAMD,OAAQ,UACnE3C,WAAY,SAAC4C,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMQ,WAAY4C,OAAMD,OAAQ,UACzE1C,SAAU,SAAC2C,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMS,SAAU2C,OAAMD,OAAQ,UACrEzC,SAAU,kBAAMuD,EAAO,CAAExF,IAAKsB,IAAKC,MAAMU,YACzCC,eAAgB,SAACyC,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMW,eAAgByC,OAAMD,OAAQ,UACjFvC,YAAa,SAACwC,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMY,YAAawC,OAAMD,OAAQ,UAC3EtC,eAAgB,SAACuC,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMa,eAAgBuC,OAAMD,OAAQ,UACjFrC,aAAc,SAACsC,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMc,aAAcsC,OAAMD,OAAQ,UAC7EpC,mBAAoB,SAACqC,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMe,mBAAoBqC,OAAMD,OAAQ,UACzFnC,gBAAiB,SAACoC,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMgB,gBAAiBoC,OAAMD,OAAQ,UACnFlC,mBAAoB,SAACmC,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMiB,mBAAoBmC,OAAMD,OAAQ,UACzFjC,iBAAkB,SAACkC,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMkB,iBAAkBkC,OAAMD,OAAQ,UACrFmB,eAAgB,SAAClB,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMmB,eAAgBiC,OAAMD,OAAQ,UACjFoB,YAAa,SAACnB,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMoB,YAAagC,OAAMD,OAAQ,UAC3EqB,eAAgB,SAACpB,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMqB,eAAgB+B,OAAMD,OAAQ,UACjFsB,aAAc,SAACrB,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMsB,aAAc8B,OAAMD,OAAQ,UAC7E5B,kBAAmB,SAAC6B,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMuB,kBAAmB6B,OAAMD,OAAQ,UACvF3B,eAAgB,SAAC4B,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMwB,eAAgB4B,OAAMD,OAAQ,UACjF1B,kBAAmB,SAAC2B,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMyB,kBAAmB2B,OAAMD,OAAQ,UACvFzB,gBAAiB,SAAC0B,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAM0B,gBAAiB0B,OAAMD,OAAQ,UACnFxB,mBAAoB,SAACyB,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAM2B,mBAAoByB,OAAMD,OAAQ,UACzFvB,iBAAkB,kBAAMqC,EAAO,CAAExF,IAAKsB,IAAKC,MAAM4B,oBAGjDC,cAAe,SAACuB,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAM6B,cAAeuB,OAAMD,OAAQ,UAC/ErB,WAAY,SAACsB,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAM8B,WAAYsB,OAAMD,OAAQ,UACzEpB,cAAe,SAACqB,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAM+B,cAAeqB,OAAMD,OAAQ,UAC/EnB,YAAa,SAACoB,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMgC,YAAaoB,OAAMD,OAAQ,UAC3EuB,eAAgB,SAACtB,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMiC,gBAAiBmB,OAAMD,OAAQ,UAClFjB,kBAAmB,SAACkB,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMkC,kBAAmBkB,OAAMD,OAAQ,UAEvFhB,aAAc,SAACiB,GAAD,OAAUa,EAAO,CAAExF,IAAKsB,IAAKC,MAAMmC,aAAciB,OAAMD,OAAQ,UAC7Ef,kBAAmB,SAACuC,GAAD,OAAQV,EAAO,CAAExF,IAAKsB,IAAKC,MAAMoC,kBAAoBuC,EAAIvB,KAAM,GAAID,OAAQ,UAC9Fd,iBAAkB,SAACsC,GAAD,OAAQV,EAAO,CAAExF,IAAKsB,IAAKC,MAAMqC,iBAAmBsC,EAAIvB,KAAM,GAAID,OAAQ,UAC5Fb,uBAAwB,SAACqC,GAAD,OAAQV,EAAO,CAAExF,IAAKsB,IAAKC,MAAMsC,uBAAyBqC,EAAIvB,KAAM,GAAID,OAAQ,UACxGZ,kBAAmB,SAACoC,GAAD,OAAQV,EAAO,CAAExF,IAAKsB,IAAKC,MAAMuC,kBAAoBoC,EAAIvB,KAAM,GAAID,OAAQ,YDtCjFkB,O,qLEAA,SAASO,EAAMnH,GAC5B,MAAgCoH,mBAAS,SAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAgCF,mBAAS,UAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KAQMC,EAAc,WACM,KAApBJ,EAASK,OAGkB,KAApBH,EAASG,QAIpBrH,cACAuG,IAAIrE,MAAMC,MAAM,CAAEmF,SAAUN,EAAUO,SAAUL,IAAYM,MAAK,SAAA7B,GAC7C,IAAdA,EAAIE,OACNlG,EAAM8H,QAAQC,KAAK,qBACnBvC,aAAawC,QAAQ,QAAS,KAC9BnH,eAEAA,kBAVFuF,IAAQ6B,KAAK,wCAHb7B,IAAQ6B,KAAK,+CAkBjB,OACE,sBAAK/H,UAAU,eAAf,UACE,sBAAKA,UAAU,UAAf,UACE,sBAAKA,UAAU,cAAf,UACE,cAAC,IAAD,CAAMD,KAAK,WAAWC,UAAU,iBAChC,cAAC,IAAD,CACEU,MAAOyG,EACPa,SAAU,SAACC,GAAD,OAAOb,EAAYa,EAAEC,OAAOxH,QACtCyH,YAAY,qBACZnI,UAAU,gBACVoI,WAAS,OAGb,sBAAKpI,UAAU,cAAf,UACE,cAAC,IAAD,CAAMD,KAAK,WAAWC,UAAU,iBAChC,cAAC,IAAD,CACEU,MAAO2G,EACP7G,KAAK,WACLwH,SAAU,SAACC,GAAD,OAAOX,EAAYW,EAAEC,OAAOxH,QACtC2H,QAAS,SAACJ,GAAD,OA7CC,SAACA,GACD,KAAdA,EAAEK,SACJf,IA2CsBgB,CAAYN,IAC5BE,YAAY,eACZnI,UAAU,qBAGd,qBAAKA,UAAU,mBAAf,SACE,cAAC,IAAD,CAAQQ,KAAK,UAAUP,QAAS,kBAAMsH,KAAtC,+BAGJ,qBAAKvH,UAAU,iBAAf","file":"static/js/15.eb783b8b.chunk.js","sourcesContent":["import React from \"react\"\r\n\r\nexport default function Icon(props) {\r\n  let { name, className } = props\r\n  return (\r\n    <span\r\n      className={`icon iconfont icon-${name} ${className ? className : \"\"}`}\r\n      onClick={props.onClick}\r\n    ></span>\r\n  )\r\n}\r\n","import store from '../store'\r\nimport { fromJS } from 'immutable'\r\n\r\nlet timer\r\n\r\n//显示loading\r\nconst showLoading = (delay = 0) => {\r\n  timer = setTimeout(() => {\r\n    store.dispatch({\r\n      type: 'SET_LIGHT_STATE',\r\n      key: ['isLoading'],\r\n      value: true,\r\n    })\r\n  }, delay)\r\n}\r\n\r\n//隐藏loading\r\nconst hideLoading = () => {\r\n  clearTimeout(timer)\r\n  store.dispatch({\r\n    type: 'SET_LIGHT_STATE',\r\n    key: ['isLoading'],\r\n    value: false,\r\n  })\r\n}\r\n\r\n//把url里的查询字段转换成对象\r\nconst parseQueryString = (url) => {\r\n  let params = {}\r\n  let arr = url.split('?')\r\n  if (arr.length <= 1) {\r\n    return params\r\n  }\r\n  arr = arr[1].split('&')\r\n  for (let i = 0, l = arr.length; i < l; i++) {\r\n    let a = arr[i].split('=')\r\n    params[a[0]] = a[1]\r\n  }\r\n  return params\r\n}\r\n\r\n//包路由里的查询字段转换成对象\r\nconst getRouterSearchObj = (props) => {\r\n  const {\r\n    location: { search },\r\n  } = props\r\n  const routerSearchObj = parseQueryString(search)\r\n  return routerSearchObj\r\n}\r\n\r\n//获取主机名\r\nconst getHost = (url) => {\r\n  var reg = /http(s)?:\\/\\/([A-Za-z0123456789:.]+)\\/\\S+/\r\n  var result = reg.exec(url)\r\n  if (result) {\r\n    return 'http://' + result[2]\r\n  }\r\n}\r\n\r\nconst deepClone = (obj) => {\r\n  return fromJS(obj).toJS()\r\n}\r\n\r\nconst imgUrlFormat = (url) => {\r\n  if (process.env.REACT_APP_MODE === 'dev' || process.env.REACT_APP_MODE === 'test') {\r\n    let tempUrl = [...url]\r\n    tempUrl.splice(7, 0, 'test_')\r\n    tempUrl = tempUrl.join('')\r\n    return tempUrl\r\n  } else {\r\n    return url\r\n  }\r\n}\r\n\r\nexport {\r\n  showLoading,\r\n  hideLoading,\r\n  parseQueryString,\r\n  getRouterSearchObj,\r\n  getHost,\r\n  deepClone,\r\n  imgUrlFormat,\r\n}\r\n","import light from \"./lightUrls\"\r\n\r\nconst urls = {\r\n  light,\r\n}\r\n\r\nexport default urls\r\n","import { nodeBaseURL  } from '../utils/config'\r\n\r\n//删除nodeBaseURL即可请求测试服务器的java接口\r\n\r\nconst urls = {\r\n  login: '/edu/auth/login',\r\n  logout: '/edu/auth/logout',\r\n  getUserInfo: nodeBaseURL + '/api/getUserInfo',\r\n  uploadLogo: nodeBaseURL + '/api/upload', //不是axios发起的请求，需要特殊处理\r\n  shopSearch: nodeBaseURL +  '/api/shop/search',\r\n  shopAdd: nodeBaseURL +  '/api/shop/add',\r\n  shopDelete: nodeBaseURL +  '/api/shop/delete',\r\n  shopEdit: nodeBaseURL +  '/api/shop/edit',\r\n  category: nodeBaseURL +  '/api/category',\r\n  templateSearch: nodeBaseURL +  '/api/template/search',\r\n  templateAdd: nodeBaseURL +  '/api/template/add',\r\n  templateDelete: nodeBaseURL +  '/api/template/delete',\r\n  templateEdit: nodeBaseURL +  '/api/template/edit',\r\n  easyTemplateSearch: nodeBaseURL +  '/api/easyTemplate/search',\r\n  easyTemplateAdd: nodeBaseURL +  '/api/easyTemplate/add',\r\n  easyTemplateDelete: nodeBaseURL +  '/api/easyTemplate/delete',\r\n  easyTemplateEdit: nodeBaseURL +  '/api/easyTemplate/edit',  \r\n  categorySearch: nodeBaseURL +  '/api/category/search',\r\n  categoryAdd: nodeBaseURL +  '/api/category/add',\r\n  categoryDelete: nodeBaseURL +  '/api/category/delete',\r\n  categoryEdit: nodeBaseURL +  '/api/category/edit',\r\n  testCompanySearch: nodeBaseURL +  '/api/company/search',\r\n  testCompanyAdd: nodeBaseURL +  '/api/company/add',\r\n  testCompanyDelete: nodeBaseURL +  '/api/company/delete',\r\n  testCompanyEdit: nodeBaseURL +  '/api/company/edit',\r\n  testCompanyFastAdd: nodeBaseURL +  '/api/company/fastAdd',\r\n  testRelatedBrand: nodeBaseURL +  '/api/relatedBrand',\r\n\r\n\r\n  //商户列表\r\n  companySearch: '/edu/OffLineCompany/list',\r\n  companyAdd: '/edu/OffLineCompany/addCompany',\r\n  companyDelete: '/edu/OffLineCompany/del',\r\n  companyEdit: '/edu/OffLineCompany/edit',\r\n  companyQuickAdd: '/edu/OffLineCompany/quickAdd',\r\n  companySetOperate: '/edu/OffLineCompany/setOperate',\r\n  //关联品牌\r\n  relatedBrand: '/edu/OffLineCompany/brandList',\r\n  companyBaiduCheck: '/edu/baidu/company/submit?companyId=',\r\n  companyBaiduView: '/edu/baidu/company/view?companyId=',\r\n  companyBaiduResetCheck: '/edu/baidu/company/reset/submit?companyId=',\r\n  companyBaiduPhone: '/edu/baidu/company/phone/submit?companyId=',\r\n\r\n}\r\n\r\nexport default urls","\r\nconst baseURL = {\r\n  dev: 'http://test_zhiliao.gongzuoshouji.cn',\r\n  test: 'http://test_zhiliao.gongzuoshouji.cn',\r\n  prod: 'http://zhiliao.gongzuoshouji.cn'\r\n}[process.env.REACT_APP_MODE]\r\n\r\nconst nodeBaseURL = {\r\n  dev: 'http://localhost:81',\r\n  test: 'https://efficacious-tiny-infinity.glitch.me',\r\n  prod: 'https://efficacious-tiny-infinity.glitch.me'\r\n}[process.env.REACT_APP_MODE]\r\n\r\nexport { baseURL, nodeBaseURL }","import axios from 'axios'\r\nimport { message } from 'antd'\r\nimport { baseURL  } from '../utils/config'\r\nimport qs from 'qs'\r\n\r\naxios.defaults.baseURL = baseURL\r\n\r\naxios.interceptors.request.use(\r\n  (config) => {\r\n    config.headers.token = localStorage.getItem('token') || ''\r\n\r\n    // if (config.isNeedExtraData !== false) {\r\n    //   let extraData = { userId: 1 }\r\n    //   if (config.method === \"get\") {\r\n    //     config.params = { ...extraData, ...config.data }\r\n    //   } else {\r\n    //     config.data = { ...extraData, ...config.data }\r\n    //   }\r\n    // }\r\n    if (config.method === 'get') {\r\n      config.params = { ...config.data }\r\n    }\r\n    return config\r\n  },\r\n  (err) => {\r\n    return Promise.reject(err)\r\n  }\r\n)\r\n\r\naxios.interceptors.response.use((res) => {\r\n  //code是node接口的状态码，state是java接口的状态码\r\n  if (res.data.code === 200 || res.data.state === 1) {\r\n    return res.data\r\n  } else if (res.data.code === 400 || res.data.state === 0) {\r\n    let msg = ''\r\n    msg = res.data.message\r\n    if(res.data && res.data.data) {\r\n      msg += res.data.data.error_msg ? `:${res.data.data.error_msg} ` : ''\r\n      msg += res.data.data.error_code ? res.data.data.error_code: ''\r\n\r\n    }\r\n    message.warning(msg)\r\n    return res.data\r\n  } else {\r\n    return Promise.reject(res)\r\n  }\r\n})\r\n\r\nexport const common = async (config) => {\r\n  if (config.contentType === 'application/x-www-form-urlencoded') {\r\n    config.headers = { 'content-type': 'application/x-www-form-urlencoded' }\r\n    config.data = qs.stringify(config.data)\r\n  }\r\n  let res = await axios(config)\r\n  return res\r\n}\r\n","import light from './lightApi'\r\n\r\nconst Api = {\r\n  light\r\n}\r\n\r\nexport default Api\r\n\r\n\r\n\r\n","import urls from './urls'\r\nimport { common } from './common'\r\n\r\n//common函数传递的参数添加 contentType: 'application/x-www-form-urlencoded' 即可改变post请求参数传递的格式\r\nconst Api = {\r\n  login: (data) => common({ url: urls.light.login, data, method: 'post' }),\r\n  logout: (data) => common({ url: urls.light.logout, data, method: 'post' }),\r\n  getUserInfo: () => common({ url: urls.light.getUserInfo }),\r\n  shopSearch: (data) => common({ url: urls.light.shopSearch, data, method: 'post' }),\r\n  shopAdd: (data) => common({ url: urls.light.shopAdd, data, method: 'post' }),\r\n  shopDelete: (data) => common({ url: urls.light.shopDelete, data, method: 'post' }),\r\n  shopEdit: (data) => common({ url: urls.light.shopEdit, data, method: 'post' }),\r\n  category: () => common({ url: urls.light.category }),\r\n  templateSearch: (data) => common({ url: urls.light.templateSearch, data, method: 'post' }),\r\n  templateAdd: (data) => common({ url: urls.light.templateAdd, data, method: 'post' }),\r\n  templateDelete: (data) => common({ url: urls.light.templateDelete, data, method: 'post' }),\r\n  templateEdit: (data) => common({ url: urls.light.templateEdit, data, method: 'post' }),\r\n  easyTemplateSearch: (data) => common({ url: urls.light.easyTemplateSearch, data, method: 'post' }),\r\n  easyTemplateAdd: (data) => common({ url: urls.light.easyTemplateAdd, data, method: 'post' }),\r\n  easyTemplateDelete: (data) => common({ url: urls.light.easyTemplateDelete, data, method: 'post' }),\r\n  easyTemplateEdit: (data) => common({ url: urls.light.easyTemplateEdit, data, method: 'post' }),\r\n  categroySearch: (data) => common({ url: urls.light.categorySearch, data, method: 'post' }),\r\n  categroyAdd: (data) => common({ url: urls.light.categoryAdd, data, method: 'post' }),\r\n  categroyDelete: (data) => common({ url: urls.light.categoryDelete, data, method: 'post' }),\r\n  categroyEdit: (data) => common({ url: urls.light.categoryEdit, data, method: 'post' }),\r\n  testCompanySearch: (data) => common({ url: urls.light.testCompanySearch, data, method: 'post' }),\r\n  testCompanyAdd: (data) => common({ url: urls.light.testCompanyAdd, data, method: 'post' }),\r\n  testCompanyDelete: (data) => common({ url: urls.light.testCompanyDelete, data, method: 'post' }),\r\n  testCompanyEdit: (data) => common({ url: urls.light.testCompanyEdit, data, method: 'post' }),\r\n  testCompanyFastAdd: (data) => common({ url: urls.light.testCompanyFastAdd, data, method: 'post' }),\r\n  testRelatedBrand: () => common({ url: urls.light.testRelatedBrand }),\r\n\r\n  //商户列表\r\n  companySearch: (data) => common({ url: urls.light.companySearch, data, method: 'post' }),\r\n  companyAdd: (data) => common({ url: urls.light.companyAdd, data, method: 'post' }),\r\n  companyDelete: (data) => common({ url: urls.light.companyDelete, data, method: 'post' }),\r\n  companyEdit: (data) => common({ url: urls.light.companyEdit, data, method: 'post' }),\r\n  companyFastAdd: (data) => common({ url: urls.light.companyQuickAdd, data, method: 'post' }),\r\n  companySetOperate: (data) => common({ url: urls.light.companySetOperate, data, method: 'post' }),\r\n  //关联品牌列表\r\n  relatedBrand: (data) => common({ url: urls.light.relatedBrand, data, method: 'post' }),\r\n  companyBaiduCheck: (id) => common({ url: urls.light.companyBaiduCheck + id, data: {}, method: 'post' }),\r\n  companyBaiduView: (id) => common({ url: urls.light.companyBaiduView + id, data: {}, method: 'post' }),\r\n  companyBaiduResetCheck: (id) => common({ url: urls.light.companyBaiduResetCheck + id, data: {}, method: 'post' }),\r\n  companyBaiduPhone: (id) => common({ url: urls.light.companyBaiduPhone + id, data: {}, method: 'post' }),\r\n\r\n}\r\n\r\nexport default Api","import React, { useState } from 'react'\r\nimport { Button, Input, message } from 'antd'\r\nimport Icon from '../../../components/light/Icon'\r\nimport Api from '../../../api'\r\nimport { showLoading, hideLoading } from '../../../utils/tools'\r\n\r\nexport default function Login(props) {\r\n  const [username, setUsername] = useState('admin')\r\n  const [password, setPassword] = useState('123456')\r\n\r\n  const handleEnter = (e) => {\r\n    if (e.keyCode === 13) {\r\n      handleLogin()\r\n    }\r\n  }\r\n\r\n  const handleLogin = () => {\r\n    if (username.trim() === '') {\r\n      message.info('用户名不能为空')\r\n      return\r\n    } else if (password.trim() === '') {\r\n      message.info('密码不能为空')\r\n      return\r\n    }\r\n    showLoading()\r\n    Api.light.login({ userName: username, passWord: password }).then(res => {\r\n      if (res.state === 1) {\r\n        props.history.push('/light/index/home')\r\n        localStorage.setItem('token', '1')\r\n        hideLoading()\r\n      } else {\r\n        hideLoading()\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className=\"m-login-wrap\">\r\n      <div className=\"m-login\">\r\n        <div className=\"m-login-row\">\r\n          <Icon name=\"username\" className=\"m-login-icon\"></Icon>\r\n          <Input\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            placeholder=\"用户名\"\r\n            className=\"m-login-input\"\r\n            autoFocus\r\n          />\r\n        </div>\r\n        <div className=\"m-login-row\">\r\n          <Icon name=\"password\" className=\"m-login-icon\"></Icon>\r\n          <Input\r\n            value={password}\r\n            type=\"password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            onKeyUp={(e) => handleEnter(e)}\r\n            placeholder=\"密码\"\r\n            className=\"m-login-input\"\r\n          />\r\n        </div>\r\n        <div className=\"m-login-btn-wrap\">\r\n          <Button type=\"primary\" onClick={() => handleLogin()}>登录</Button>\r\n        </div>\r\n      </div>\r\n      <div className=\"m-login-footer\">\r\n      Copyright 商之讯管理系统\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"sourceRoot":""}